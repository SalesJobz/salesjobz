<!--A Design by W3layouts
Author: W3layout
Author URL: http://w3layouts.com
License: Creative Commons Attribution 3.0 Unported
License URL: http://creativecommons.org/licenses/by/3.0/
-->
<!DOCTYPE HTML>
<html>
<head>
<title>SalesJobz</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="keywords" content="Seeking Responsive web template, Bootstrap Web Templates, Flat Web Templates, Andriod Compatible web template, 
Smartphone Compatible web template, free webdesigns for Nokia, Samsung, LG, SonyErricsson, Motorola web design" />
<script type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); } </script>
<link href="css/bootstrap-3.1.1.min.css" rel='stylesheet' type='text/css' />
<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="js/jquery.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<!-- Custom Theme files -->
<link href="css/style.css" rel='stylesheet' type='text/css' />
<link href='//fonts.googleapis.com/css?family=Roboto:100,200,300,400,500,600,700,800,900' rel='stylesheet' type='text/css'>
<!----font-Awesome----->
<link href="css/font-awesome.css" rel="stylesheet"> 
<!----font-Awesome----->
</head>
<body>
<nav class="navbar navbar-default" role="navigation">
	<div class="container">
	    <div class="navbar-header">
	        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
		        <span class="sr-only">Toggle navigation</span>
		        <span class="icon-bar"></span>
		        <span class="icon-bar"></span>
		        <span class="icon-bar"></span>
	        </button>
	        <a class="navbar-brand" href="index.html"><img src="images/logo.png" alt=""/></a>
	    </div>
	    <!--/.navbar-header-->
	    <div class="navbar-collapse collapse" id="bs-example-navbar-collapse-1" style="height: 1px;">
	        <ul class="nav navbar-nav">
		        <li id = "login_wrapper"><a href="login.html">Login</a></li>
		        <li id = "signup_wrapper"><a href="signup.html">New user Signup!</a></li>
		      
		      	<li id = "profile_picture_wrapper"><a href="profile.html"><img id="profile_picture"src="images/user-default.png" style="width:50px" alt=""/></a></li>
		        <li id = "user_name_wrapper"><a href="profile.html"><span id = "user_name" ></span></a></li>
		        <li id = "logout_wrapper"><a href="logout.html">Logout</a></li>
	        </ul>
	    </div>
	    <div class="clearfix"> </div>
	  </div>
	    <!--/.navbar-collapse-->
	</nav>
<div class="banner_1">
	<div class="container">
		<div id="search_wrapper1">
		   <div id="search_form" class="clearfix">
		    <h1>Start your job search</h1>
		    <p>
			 <input type="text" class="text" placeholder=" " value="Enter Keyword(s)" onfocus="this.value = '';" onblur="if (this.value == '') {this.value = 'Enter Keyword(s)';}">
			 <input type="text" class="text" placeholder=" " value="Location" onfocus="this.value = '';" onblur="if (this.value == '') {this.value = 'Location';}">
			 <label class="btn2 btn-2 btn2-1b"><input type="submit" value="Find Jobs"></label>
			</p>
           </div>
		</div>
   </div> 
</div>	
<div class="container">
    <div class="single">  
	   <div class="form-container">
        <h2>Candidate profile</h2>
        <form>
          <div class="row">
            <div class="form-group col-md-12">
                <label class="col-md-3 control-lable" for="firstName">First Name</label>
                <div class="col-md-9">
                    <input id = "first_name" type="text" path="firstName"  class="form-control input-sm"/>
                </div>
            </div>
         </div>
         <div class="row">
            <div class="form-group col-md-12">
                <label class="col-md-3 control-lable" for="lastName">Last Name</label>
                <div class="col-md-9">
                    <input id = "last_name" type="text" path="lastName"  class="form-control input-sm"/>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="form-group col-md-12">
                <label class="col-md-3 control-lable" for="lastName">Mobile Number</label>
                <div class="col-md-9">
                    <input id = "mobile_number" type="text" path="lastName"  class="form-control input-sm"/>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="form-group col-md-12">
                <label class="col-md-3 control-lable" for="dob">Date of birth</label>
                <div class="col-md-9">
                    <input id = "date_of_birth" type="text" path="dob"  class="form-control input-sm"/>
                </div>
            </div>
        </div>
         <div class="row">
            <div class="form-group col-md-12">
                <label class="col-md-3 control-lable" for="dob">Education</label>
                <div class="col-md-9">
                    <input id = "education" type="text" path="dob"  class="form-control input-sm"/>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="form-group col-md-12">
                <label class="col-md-3 control-lable" for="dob">Profile photo</label>
                <div class="col-md-3">
                	<img id = "profile_picture_update"  src = "images/user-default.png" style="width:100%"/><br>
                </div>
            </div>
        </div>
        
        <div class="row">
            <div class="form-group col-md-12">
                <label class="col-md-3 control-lable" for="dob"></label>
                <div class="col-md-9">
                	<input type="file" id="profile_picture_file_chooser" /> 
                    <input id = "profile_picture_button" type="button" path="dob"   value = "Change profile photo"/>
                    	<img id = "profile_picture_update_spinner"  src = "images/loading_spinner.gif" style="width:10%"/><br>
                </div>
            </div>
        </div>
        
                <div class="row">
            <div class="form-group col-md-12">
                <label class="col-md-3 control-lable" for="dob">Resume</label>
                <div class="col-md-9">
                  	<input type="file" id="upload_resume_file_chooser" />                
                    <input id = "upload_resume_button" type="button" path="dob"   value = "Upload resume"/>
                    <a id="download_resume" href="">Download resume</a>
                    	<img id = "upload_resume_spinner"  src = "images/loading_spinner.gif" style="width:10%"/><br>
                </div>
            </div>
        </div>


      <!--   <div class="row">
            <div class="form-group col-md-12">
                <label class="col-md-3 control-lable" for="country">Country</label>
                <div class="col-md-9">
                    <select path="country" id="country" class="form-control input-sm">
                        <option value="">Select Country</option>
                        <option value="">Japan</option>
                        <option value="">Kenya</option>
                        <option value="">Dubai</option>
                        <option value="">Italy</option>
                        <option value="">Greece</option> 
                        <option value="">Iceland</option> 
                        <option value="">China</option> 
                        <option value="">Doha</option> 
                        <option value="">Irland</option> 
                        <option value="">Srilanka</option> 
                        <option value="">Russia</option> 
                        <option value="">Hong Kong</option> 
                        <option value="">Germany</option>
                        <option value="">Canada</option>  
                        <option value="">Mexico</option> 
                        <option value="">Nepal</option>
                        <option value="">Norway</option> 
                        <option value="">Oman</option>
                        <option value="">Pakistan</option>  
                        <option value="">Kuwait</option> 
                        <option value="">Indonesia</option>  
                        <option value="">Spain</option>
                        <option value="">Thailand</option>  
                        <option value="">Saudi Arabia</option> 
                        <option value="">Poland</option> 
                    </select>
                    
                </div>
            </div>
        </div>
        <div class="row">
            <div class="form-group col-md-12">
                <label class="col-md-3 control-lable" for="country">Work Experience</label>
                <div class="col-md-9">
                    <select path="country" id="country" class="form-control input-sm">
                        <option value="">Select</option>
                        <option value="">Fresher</option>
                        <option value="">0</option>
                        <option value="">1</option>
                        <option value="">2</option>
                        <option value="">3</option> 
                        <option value="">4</option> 
                        <option value="">5</option> 
                        <option value="">6</option> 
                        <option value="">7</option> 
                        <option value="">8</option> 
                        <option value="">9</option> 
                        <option value="">10</option> 
                        <option value="">11</option>
                        <option value="">12</option>  
                        <option value="">13</option>
                        <option value="">14</option>
                        <option value="">15</option>      
                    </select>
                    
                </div>
            </div>
        </div>
        <div class="row">
            <div class="form-group col-md-12">
                <label class="col-md-3 control-lable" for="country">Education</label>
                <div class="col-md-9">
                    <select path="country" id="country" class="form-control input-sm">
                        <option value="">Select</option>
                        <option value="">Bsc</option>
                        <option value="">BTech</option>
                        <option value="">Mca</option>
                        <option value="">BCA</option>
                        <option value="">Diploma</option> 
                        <option value="">Other</option> 
                    </select>
               </div>
            </div>
        </div> 
        <div class="row">
            <div class="form-group col-md-12">
                <label class="col-md-3 control-lable" for="subjects">Subjects</label>
                <div class="col-md-9 sm_1">
                   <textarea cols="77" rows="6" value=" " onfocus="this.value='';" onblur="if (this.value == '') {this.value = '';}"> </textarea>
                    
                </div>
            </div>
        </div> -->
        <div class="row">
            <div class="form-actions floatRight">
                <input id = "save_changes" type="button" value="Save changes" class="btn btn-primary btn-sm">
            </div>
        </div>
    </form>
    </div>
 </div>
</div>
<div class="footer">
	<div class="container">
		<div class="col-md-3 grid_3">
			<h4>Navigate</h4>
			<ul class="f_list f_list1">
				<li><a href="index.html">Home</a></li>
				<li><a href="login.html">Sign In</a></li>
				<li><a href="login.html">Join Now</a></li>
				<li><a href="about.html">About</a></li>
			</ul>
			<ul class="f_list">
				<li><a href="features.html">Features</a></li>
				<li><a href="terms.html">Terms of use</a></li>
				<li><a href="contact.html">Contact Us</a></li>
				<li><a href="jobs.html">Post a Job</a></li>
			</ul>
			<div class="clearfix"> </div>
		</div>
		<div class="col-md-3 grid_3">
			<h4>Twitter Widget</h4>
			<div class="footer-list">
			  <ul>
				<li><i class="fa fa-twitter tw1"> </i><p><span class="yellow"><a href="#">consectetuer</a></span> adipiscing elit web design</p></li>
				<li><i class="fa fa-twitter tw1"> </i><p><span class="yellow"><a href="#">consectetuer</a></span> adipiscing elit web design</p></li>
				<li><i class="fa fa-twitter tw1"> </i><p><span class="yellow"><a href="#">consectetuer</a></span> adipiscing elit web design</p></li>
			  </ul>
			</div>
		</div>
		<div class="col-md-3 grid_3">
			<h4>Seeking</h4>
			<p>There are many variations of passages of Lorem Ipsum available, but the majority have suffered alteration in some form, by injected humour, or randomised words which don't look even slightly believable. </p>
		</div>
		<div class="col-md-3 grid_3">
			<h4>Sign up for our newsletter</h4>
			<p>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam.</p>
			<form>
				<input type="text" class="form-control" placeholder="Enter your email">
				<button type="button" class="btn red">Subscribe now!</button>
		    </form>
		</div>
		<div class="clearfix"> </div>
	</div>
</div>
<div class="footer_bottom">	
  <div class="container">
    <div class="col-sm-2">
  		<ul class="f_list2">
			<li><a href="jobs.html">Russia Jobs</a></li>
			<li><a href="jobs.html">Australia Jobs</a></li>
			<li><a href="jobs.html">Srilanka Jobs</a></li>
			<li><a href="jobs.html">Poland Jobs</a></li>
	    </ul>
  	</div>
  	<div class="col-sm-2">
  		<ul class="f_list2">
			<li><a href="jobs.html">Newzland Jobs</a></li>
			<li><a href="jobs.html">Pakistan Jobs</a></li>
			<li><a href="jobs.html">Srilanka Jobs</a></li>
			<li><a href="jobs.html">Irland Jobs</a></li>
	    </ul>
  	</div>
  	<div class="col-sm-2">
  		<ul class="f_list2">
			<li><a href="jobs.html">Canada Jobs</a></li>
			<li><a href="jobs.html">Germany Jobs</a></li>
			<li><a href="jobs.html">China Jobs</a></li>
			<li><a href="jobs.html">Nepal Jobs</a></li>
	    </ul>
  	</div>
  	<div class="col-sm-6 footer_text">
       <p>"Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numqua"</p>
  	</div>
  	<div class="clearfix"> </div>
	<div class="copy">
		<p>Copyright Â© 2015 Seeking . All Rights Reserved . Design by <a href="http://w3layouts.com/" target="_blank">W3layouts</a> </p>
	</div>
  </div>
</div>
<script src="https://sdk.amazonaws.com/js/aws-sdk-2.2.32.min.js"></script>
<script>

if (localStorage.getItem("sj_userid") === null) {
	
	$("#profile_picture_wrapper").hide();
	$("#user_name_wrapper").hide();
	$("#logout_wrapper").hide();
	}else{
		$("#login_wrapper").hide();
		$("#signup_wrapper").hide();		
	
		$("#user_name").text(localStorage.getItem("sj_username"));
		$("#profile_picture").attr("src", localStorage.getItem("sj_userprofilepicture"));
	}
	
	$("#profile_picture_update_spinner").hide();
	$("#upload_resume_spinner").hide();

	$.post( "https://lxa3sc7v79.execute-api.us-west-2.amazonaws.com/prod/salesjobz",JSON.stringify({"method":"getCandidateProfile","id": localStorage.getItem("sj_userid")}))
	  .done(function( data ) {
	  //alert(JSON.stringify(data ));
			 if(data.status == "ok"){
				 var userInfo = JSON.parse(data.db_result).Items[0];				 
			
				    // Store
//	   						    localStorage.setItem("sj_usertype", em);
				   $("#first_name").val(userInfo.first_name.S);
				   $("#last_name").val(userInfo.last_name.S);
				   $("#mobile_number").val(userInfo.mobile_number.S);
				   $("#date_of_birth").val(userInfo.date_of_birth.S);
				   $("#education").val(userInfo.education.S);
				   
					$("#profile_picture_update").attr("src",userInfo.profile_picture.S);
					$("#download_resume").attr("href",userInfo.resume.S);

				    localStorage.setItem("sj_username", userInfo.first_name.S);
				    localStorage.setItem("sj_userprofilepicture", userInfo.profile_picture.S);		 
				    


		    	}else{
  			alert("Invalid user!!!");
			  }
	}); 
	
	// Initialize the Amazon Cognito credentials provider
	AWS.config.region = 'us-east-1'; // Region
	AWS.config.credentials = new AWS.CognitoIdentityCredentials({
		IdentityPoolId: 'us-east-1:64584e10-5ebd-4b06-a822-bd0101b2c394',
	});
	AWS.config.credentials.get(function(err) {
		if (err) alert(err);
		console.log(AWS.config.credentials);
	});
	
	var bucket = new AWS.S3({region: 'us-west-2', maxRetries: 15,params: {Bucket: 'sj-resume'}});

	$("#profile_picture_button").click(function( event ) {
		
		$("#profile_picture_update_spinner").show();

		var file = document.getElementById('profile_picture_file_chooser').files[0];
		if (file) {
		 

		  var params = {Key: file.name, ContentType: file.type, Body: file};
		  bucket.upload(params, function (err, data) {
			if(err){
				alert('Error ocurred while uploading!!!');
				
			}else{
				$("#profile_picture_update_spinner").hide();

				$("#profile_picture_update").attr("src",data.Location);

			}
		  });
		} else {
		  alert('Please choose file before you upload');
		}
		
	});
	
	$("#upload_resume_button").click(function( event ) {
		$("#upload_resume_spinner").show();

		var file = document.getElementById('upload_resume_file_chooser').files[0];
		if (file) {
		 

		  var params = {Key: file.name, ContentType: file.type, Body: file};
		  bucket.upload(params, function (err, data) {
			if(err){
				alert('Error ocurred while uploading!!!');
				
			}else{
				$("#upload_resume_spinner").hide();

				$("#download_resume").attr("href",data.Location);

			}
		  });
		} else {
		  alert('Please choose file before you upload');
		}
		
	});
	
	$("#save_changes").click(function( event ) {
		
		$.post( "https://lxa3sc7v79.execute-api.us-west-2.amazonaws.com/prod/salesjobz",JSON.stringify({"method":"updateCandidateProfile","id": localStorage.getItem("sj_userid"),"first_name":$("#first_name").val(),"last_name":$("#last_name").val(),"mobile_number":$("#mobile_number").val(),"date_of_birth":$("#date_of_birth").val(),"education":$("#education").val(),"resume":$("#download_resume").attr("href"),"profile_picture":$("#profile_picture_update").attr("src")}))
		  .done(function( data ) {
		  //alert(JSON.stringify(data ));
				 if(data.status == "ok"){
		    	 		$.post( "https://lxa3sc7v79.execute-api.us-west-2.amazonaws.com/prod/salesjobz",JSON.stringify({"method":"getCandidateProfile","id": localStorage.getItem("sj_userid")}))
						  .done(function( data ) {
		  				  //alert(JSON.stringify(data ));
		   					 if(data.status == "ok"){
		   						 var userInfo = JSON.parse(data.db_result).Items[0];
		   					
		   				    	if (typeof(Storage) !== "undefined") {
		   						    // Store
	//	   						    localStorage.setItem("sj_usertype", em);
		   						    localStorage.setItem("sj_userid", userInfo.id.S);
		   						    localStorage.setItem("sj_username", userInfo.first_name.S);
		   						    localStorage.setItem("sj_userprofilepicture", userInfo.profile_picture.S);		 
		   						    
			   				    	window.location.replace("http://salesjobz.s3-website-us-west-2.amazonaws.com/profile.html");

		   						} else {
		   						    alert("Sorry, your browser does not supported...");
		   						}

		   				    	}else{
					    			alert("Invalid user!!!");
					  			  }
					  }); 


			    	}else{
	  			alert("Save failed!!!");
				  }
		});
		
	});
	
	

</script>
</body>
</html>	